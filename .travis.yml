language: c
os: linux
dist: xenial
sudo: true

addons:
  apt:
    sources:
      - sourceline: 'ppa:vriviere/ppa'
    packages:
      - aranym
      - genext2fs
      - rpm2cpio
      - uml-utilities
      - binutils-m68k-atari-mint
      - gcc-m68k-atari-mint

install:
    - sudo ./enable_tun.sh $USER
    - unset CC
    - unset CXX
    - mkdir -p ~/.ssh && ssh-keygen -t rsa -f ~/.ssh/id_rsa -q -N ""

jobs:
  include:
    - stage: prepare
      script: make prepare
    - stage: build1
      script: make configure1 build1
    - stage: build2
      script: make configure2 build2
    - stage: build3
      script: make configure3 build3
    - stage: build4
      script: make configure4 build4
